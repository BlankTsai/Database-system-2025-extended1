<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理後台 - 二手交易網站</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>網站管理後台</h1>
        <a href="{{ url_for('index') }}" class="nav-link">← 返回首頁</a>

        <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 30px;">
            <div class="card" style="text-align: center;">
                <h3>總商品數</h3>
                <p style="font-size: 2em; font-weight: bold; color: #007bff; margin: 10px 0;">{{ stats.total_products }}</p>
            </div>
            <div class="card" style="text-align: center;">
                <h3>庫存總價值</h3>
                <p style="font-size: 2em; font-weight: bold; color: #28a745; margin: 10px 0;">$ {{ stats.total_value | round(2) }}</p>
            </div>
            <div class="card" style="text-align: center;">
                <h3>平均單價</h3>
                <p style="font-size: 2em; font-weight: bold; color: #17a2b8; margin: 10px 0;">$ {{ stats.avg_price | round(2) }}</p>
            </div>
            <div class="card" style="text-align: center;">
                <h3>最高單價</h3>
                <p style="font-size: 2em; font-weight: bold; color: #dc3545; margin: 10px 0;">$ {{ stats.max_price }}</p>
            </div>
        </div>

        <h2>批次管理操作</h2>
        <div class="card">
            <div style="display: flex; gap: 20px; justify-content: space-around;">
                
                <form action="{{ url_for('bulk_update') }}" method="POST" style="text-align: center;">
                    <h3>全面促銷活動</h3>
                    <p>將所有價格 > $1000 的商品打 9 折</p>
                    <button type="submit" style="background-color: #fd7e14;" onclick="return confirm('確定要執行嗎？這會影響多筆商品！')">
                        執行降價 (updateMany)
                    </button>
                </form>

                <form action="{{ url_for('bulk_delete') }}" method="POST" style="text-align: center;">
                    <h3>清理低價庫存</h3>
                    <p>刪除所有價格 < $100 的商品</p>
                    <button type="submit" style="background-color: #6c757d;" onclick="return confirm('警告：確定要刪除這些商品嗎？此動作無法復原！')">
                        執行清理 (deleteMany)
                    </button>
                </form>
            </div>
        </div>

    </div>
</body>
</html>